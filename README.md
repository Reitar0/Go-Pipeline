# Тестовое задание: Библиотека потоковой обработки данных

## Архитектура и дизайн решения

Решение состоит из двух основных частей:
1.  **Библиотека пайплайна (`pipeline/`)**: Ядро, которое предоставляет инструменты для построения конвейеров.
2.  **Демо приложение (`cmd/main.go`)**: Пример использования библиотеки для вычисления хешей.

### О библиотеке:

*   Благодаря дженерикам, все этапы конвейера являются типобезопасными. Ошибки несоответствия типов данных между узлами отлавливаются на этапе компиляции, а не в рантайме.
*   Архитектура построена на стандартных возможностях языка: горутинах, каналах, `context` для управления жизненным циклом и `sync.WaitGroup` для ожидания завершения.
*   Для потоковой обработки реализован паттерн fan-out/fan-in, который обрабатывает данные в виде непрерывного потока. Результат становится доступен без ожидания полной обработки всего пакета данных.
*   Для корректной обработки ошибок и отмены пайплайн поддерживает graceful shutdown. При возникновении критической ошибки в любом из узлов весь конвейер немедленно получает сигнал об отмене через `context.Context`. Причина остановки может быть проанализирована после завершения работы.
*    Библиотека состоит из три основных строительных блоков (`Source`, `FanOut`, `Sink`), из которых можно конструировать различные пайплайны. Логика параллелизма инкапсулирована и не требует дублирования в коде.
*   Опциональное логирование реализовано через паттерн "функциональные опции", что позволяет при необходимости подключить логгер для отладки работы пайплайна.

## Инструкция по запуску

### Для запуска потребуется
*   Go версии 1.24 или выше

### Запуск

Для запуска приложения выполните команду `go run`.

    ```bash
    # Запуск с параметрами по умолчанию (текущая директория, 10 воркеров)
    go run ./cmd/main.go

    # Запуск для конкретной директории с 20 воркерами
    go run ./cmd/main.go -dir /path/to/your/directory -workers 20

    # Запуск с подробным логированием работы пайплайна
    go run ./cmd/main.go -v
    ```

### Флаги командной строки

*   `-dir <путь>`: Директория для рекурсивного сканирования файлов (по умолчанию: `.`).
*   `-workers <число>`: Количество параллельных потоков для вычисления MD5 (по умолчанию: `10`).
*   `-v`: При помощи этого флага можно включить подробное логирование для пайплайна.
